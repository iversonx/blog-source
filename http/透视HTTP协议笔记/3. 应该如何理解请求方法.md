---
title: HTTP请求方法
date: 2019-06-28
categories: http
tags: 学习笔记
description: 
---

在请求报文的请求头中必须有请求方法来指示服务器对请求的资源执行某个动作。HTTP/1.1中定义了八种方法

### 常用请求方法

#### GET / HEAD

GET方法请求从服务器获取资源，这个资源可以是静态文本、页面、图片、视频，也可以是动态生成的页面或是其他数据。

GET方法搭配URI和其他头字段能实现对资源更精细的操作。

例如，在URI后使用#，可以在获取页面后直接定位到某个标签所在的位置；使用`If-Modified-Since`字段就变成了"有条件的请求"，仅当资源被修改时才执行获取动作；使用Range字段就是"范围请求"，只获取资源的一部分数据。

HEAD方法与GET方法类似，也是请求从服务器获取资源，服务器处理机制也是一样的，但服务器不会返回请求的实体数据，只会传回响应头。

HEAD方法可以用在不真正需要资源的场合，避免传输body数据的浪费。

比如，检查一个文件是否存在；检查文件是否有最新版本。

#### POST / PUT

POST和PUT方法是向URI指定的资源提交数据，数据就放在报文的body里。

POST方法的使用场景有很多，比如在一个网站进行账户注册，点击提交按钮，浏览器就执行了一次POST请求，将填写的数据放入body里，发送给服务器；在博客网站发布一篇博文，这时浏览器也会发送POST请求。

PUT的作用和POST类似，也是向服务器提交资源，但不同的是，通常POST表示"新建 " "create"；PUT表示"修改" "update"。

在实际应用中PUT方法用的比较少；在restful 架构中PUT可能用的比较多；其他场景大多数只用POST方法来提交数据。

### 其他请求方法

DELETE方法指示服务器删除资源

CONNECT方法要求服务器为客户端和另一台远程服务器建立一条特殊的连接隧道，此时Web服务器充当了代理的角色。

OPTIONS方法要求服务器列出可以对资源实行的操作方法，在响应头的Allow字段里返回。

TRACE方法用于对HTTP链路的测试和诊断，可以显示出请求-响应的传输路径。存在漏洞会泄漏网站的信息，因此Web服务器通常是禁止使用的。

### 扩展方法

除了可以使用上面HTTP/1.1规定的八种请求方法外，还可以任意添加请求动作，主要请求方和响应方都能理解就行。

得到实际应用的扩展请求方法：COPY,MOVE,LOCK,UNLOCK,PATCH

### 安全与幂等

所谓“安全”是指请求方法不会“破坏”服务器上的资源，即不会对服务器上的资源造成实质的修改。

按照这个定义，只有GET和HEAD方法是“安全”的，因为它们是不会操作服务器的数据，只是对数据进行读取。无论GET和HEAD操作多少次，服务器上的数据都不会发生实质上的修改。

POST, PUT, DELETE 会修改服务器上的资源，所以是不安全的。

幂等意思是多次执行相同的操作，结果总是相同。

GET和HEAD既是安全的也是幂等的，DELETE可以多次删除同一个资源，效果都是资源不存在，因此也是幂等的。

POST是"新增或提交数据"，类似于SQL中INSERT语句，多次提交会创建多个资源，所以不是幂等的。PUT是"替换或更新数据"，类似于SQL中的UPDATE，多次更新同一个资源，效果总是相同的。
