---
title: HTTP 状态码
date: 2018-12-11
categories: http
tags: 学习笔记
description: HTTP状态码为客户端提供了一种理解事务处理结果的便捷方式。HTTP状态码被分成5大类，分别以数字1,2,3,4,5开头。1xx状态码表示信息化状态码,2xx表示成功状态码,3xx表示重定向状态码,4xx表示客户端错误状态码,5xx表示服务器错误状态码。
---

## HTTP 状态码

下面描述了每个状态代码，包括它可以遵循哪种方法以及响应中所需的任何元信息的描述。

### 1xx 信息化状态码

此类状态码表示临时响应。仅包含Status-Line和可选头部，并以空行结束。此类状态没有必需的头。由于HTTP/1.0没有定义任何1xx状态码，服务器不得向 HTTP/1.0客户端发送1xx响应。

#### 100 Continue

用于通知客户端已经收到请求的初始部分并且尚未被服务器拒绝。客户端应该举行发送请求的剩余部分，或者如果请求已经完成，则忽略此响应；服务器必须在请求完成后发送最终响应。

100(Continue)的目的是允许正在发送带请求主体的请求报文的客户端在发送请求主体之前，确定源服务器是否愿意接受请求。

##### HTTP/1.1客户端的要求

- 如果客户端在发送请求主体之前将等待100(Continue)响应，它必须发送带有"100-continue"。

- 如果客户端不打算发送请求正文，则不得发送具有"100-continue"期望的Expect请求头。

由于存在较老的实现，协议允许客户机可能出现不明确的情况发送"Expect: 100-continue"，而不接收417(Expectation Failed)状态或100(Continue)状态。

因此，当客户端将这个头发送到服务器时，客户端没有看到100(Continue)响应，不应该在发送请求主体前无限期等待。

##### HTTP/1.1 源服务器的要求

- 在收到包含具有“100-continue”期望的Expect请求头的请求时，源服务器必须以100(Continue)状态响应并继续从输入流中读取，或者以最终状态代码进行响应。在发送100(Continue)响应之前，不能等待请求主体。如果以最终状态响应，则可以关闭传输连接，或者继续读取和丢弃请求的其余部分。如果它返回一个最终的状态，源服务器就不能执行请求的方法。

- 如果请求不包含“100-continue”期望的Expect请求头，则源服务器不应发送100(Continue)响应；如果请求来自HTTP/1.0或更早的客户端，则不得发送100(Continue)响应。

- 如果源服务器已经收到相应请求的部分或全部请求主体，则可以省略100(Continue)响应。

- 发送100(Continue)响应的源服务器必须在收到并处理请求主体后发送最终状态，除非它过早终止传输。

- 如果源服务器收到一个不包括具有“100-continue”期望的Expect请求头的请求，则该请求包含请求主体，并且服务器在从传输连接读取整个请求主体之前用最终状态进行响应，然后服务器在读取整个请求前或在客户端关闭连接之前不应该关闭传输连接。

##### 对HTTP/1.1代理的要求

- 如果代理接收到包含具有"100-continue"期望的Expect 请求头的请求，必须转发请求并带有Expect请求头。

- 如果代理知道下一跳服务器版本是HTTP/1.0或更低，必须不转发请求，并以417状态响应。

- 代理应该维护一个缓存，记录从最近引用的下一跳服务器收到的HTTP版本号。

#### 101 Switching Protocols

说明服务器正在将协议切换成`Upgrade`消息头指定的协议。协议应该只在有利时切换，例如切换到较新版本的HTTP优于旧版本时。

### Success 2xx

此类状态码表示已成功接收，理解和接受客户端的请求。

#### 200 OK

请求已成功。响应返回的信息取决于使用的方法请求。

- GET  在响应中发送与所请求资源相对应的实体;

- HEAD  在没有任何消息体的情况下，在响应中发送与所请求资源相对应的实体头字段；

- POST  描述或包含行动结果的实体;

- TRACE  包含终端服务器接收的请求消息的实体。

#### 201 Created

请求已完成，并导致创建新资源。新创建的资源可以由响应实体中返回的URI引用，具有Location头字段给出的资源的最特定URI。响应应该包括一个实体，其中包含资源特征和位置的列表，用户或用户代理可以从中选择最合适的资源特征和位置。实体格式由Content-Type头字段中给出的媒体类型指定。

如果无法立即执行操作，服务器应该响应202(Accepted)响应。

#### 202 Accepted

该请求已被接受处理，但处理尚未完成。不保证服务器会完成这个请求，其目的是允许服务器接受对某些其他进程的请求，而不要求User Agent与服务器的连接持续存在直到请求完成。

使用此响应返回的实体应该包括请求的当前状态的指示，以及指向状态监视器的指针或用户可以期望满足请求的某些估计。

#### 203 Non-Authoritative Information

实体头部包含的信息不是来自源服务器，而是来自资源的一份副本。

#### 204 No Content

服务器已经满足请求，但是不需要返回实体，并可能希望返回更新的元信息。响应可能以实体头的形式包含新的或更新的元信息，如果存在，则应该与所请求的变体相关联。

#### 205 Reset Content

服务器已完成请求，User Agent应该重置导致请求被发送的文档视图。该响应主要用于允许通过用户输入进行动作的输入，然后清除给出输入的表单，以便用户可以容易地发起另一个输入动作。响应绝不能包含实体。

#### 206 Partial Content

服务器已完成对资源的部分GET请求。请求必须包含一个Range头字段，表示所需的范围，并且可能包含一个If-Range头字段以使请求成条件。

响应必须包括以下头：

- Content-Range 指示响应中包含的范围，或者包含每个部件的多部分/字节范围内容类型。如果响应中存在Content-Length头，则其值必须与消息体中传输的实际OCTET数相匹配。

- Date

- ETage和/或Content-Location，

- Expires，Cache-Control, 和/或Vary

### Redirection 3xx

重定向状态码要么告知客户端使用替代位置来访问它们所感兴趣的资源，要么就提供一个替代的响应而不是资源的内容。

#### 示例：资源被移走

```http
// 请求
GET /pet.txt HTTP/1.1
Host: www.aaaaa.com
Accept: *

// 响应
HTTP/1.1 301 OK
Location: http://www.bbbbb.com/
Content-length: 65
Content-type: text/plain

Plase go to our parther site, www.bbbbb.com

// 请求
GET / HTTP/1.1
Host: www.bbbbb.com
Accept: *

// 响应
HTTP/1.1 200 OK
Content-length: 65
Content-type: text/html

...
```

如果资源被移动了，可发送一个重定向状态和一个可选的Location头部来告知客户端资源被移走以及现在可以在哪里找到它。

可以通过某些重定向状态码对资源的应用程序本地副本与源端服务器上的资源进行验证，比如查看本地副本是否是最新的。

```http
GET /index.html HTTP/1.1
Host: www.aaaaa.com
Accept: *
If-Modified-Since: Fri, Oct 3 2018 20:17:20 GMT

HTTP/1.1 304 Not Modified
...
```

总之在对包含了重定向状态码的非HEAD请求进行响应时，最好要包含一个实体，并在实体中描述信息和执行重定向URL的链接。

#### 300   Multiple Choices

客户端请求一个实际指向多个资源的URL时会返回这个状态码，比如服务器上有某个文档的英语和法语版。返回300时会带有一个选项列表，供用户选择希望使用的版本。

#### 301   Moved Permanently

在HTTP/1.0和HTTP/1.1规范中都代表永久重定向，响应的Location中包含资源现在所处的URL。

#### 302   Found

在HTTP/1.0规范中表示临时重定向，Location中的URL是临时的，后续的请求还是使用原URL。如果使用POST方法的请求接收到302状态码的响应，则User Agent不得自动重定向，因为可能会更改发出请求的条件。注意：在收到302状态代码后自动重定向POST请求时，某些现有User Agent(浏览器)会错误地将其更改为GET请求。

由于大多数浏览器将302视为303响应，对Location值执行GET，而不管原始请求的方法是什么。在HTTP/1.1规范中为希望明确清楚客户端期望哪种反应的服务器添加了状态303和307来细化302。

#### 303   See Other

继承了HTTP/1.0中302的实现，无论原请求是GET还是POST，都可以自动进行重定向。

#### 304   Not Modified

客户端可以通过所包含的请求首部，使其请求变成有条件的。如果客户端发起了一个条件GET请求，而最近资源未被修改，就可以用这个状态码来说明资源未被修改。这个状态码的响应不应该包含主体

#### 305   Use Proxy

说明必须通过一个i额代理来访问资源；代理的位置由Location给出。注意，客户端是相对某个特定资源来解析这条响应的，不能假定所有请求都通过这个代理进行。

#### 306   暂未被使用


临时重定向，继承了HTTP/1.0中302的规范，如果原请求不是GET或HEAD方法，那么浏览器不得自动重定向。

302、303、307状态码之间存在一些交叉。用法有细微的差别，大部分差别主要源于HTTP/1.0和HTTP/1.1对这些状态码处理方式的不同。

当HTTP/1.0客户端发起一个POST请求，并在响应中收到302时，它会接受Location的重定向URL，并向这个URL发起GET请求。

问题在于HTTP/1.1规范使用303状态码来实现同样的行为。

### Client Error 4xx

#### 411  Length Required

表示请求头必须包含Content-Length，否则服务器拒绝接受请求。

#### 412  Precondition Failed

在服务器上测试时，一个或多个请求头字段中给出的前提条件被评估为false。该响应代码允许客户端在当前资源元信息（头字段数据）上放置先决条件，从而防止所请求的方法应用于除预期的资源之外的资源。

#### 413  Request Entity Too Large

请求实体大于服务器愿意或能够处理的请求实体。服务器可以关闭连接以防止客户端继续请求。

#### 414  Request-URI Too Long

客户端所发请求中的请求URL比服务器能够或者希望处理的要长。

#### 415  Unsupported Media Type

请求的实体采用所请求方法的请求资源不支持的格式。

#### 416  Requested Range Not Satisfiable

请求报文所请求的是指定资源的某个范围，而此范围无效或无法满足。

#### 417  Expectation Failed

服务器无法满足 Expect请求头给出的期望；如果服务器是代理，则服务器明确证明下一跳服务器无法满足请求。

### Server Error 5xx

以数字"5"开头的响应状态码表示服务器指导它有错误或无法执行请求的情况。除了在响应HEAD请求时，服务器应该包括一个实体，其中包含错误请求的解释，以及它是暂时的还是永久的。

#### 500  Internal Server Error

服务器遇到意外情况，无法满足请求。

#### 501  Not Implemented

服务器不支持完成请求所需的功能。当服务器无法识别请求方法并且无法为任何资源支持时，这是适当的响应。

#### 502  Bad Gateway

服务器在充当网关或代理时，在尝试完成请求时从其访问的上游服务器收到无效响应。

#### 503  Service Unavailable

由于服务器的临时过载或维护，服务器当前无法处理请求。这意味着这是一个暂时的条件，经过一段时间的延迟后会得到缓解。如果已知，延迟的长度可以在Retry-After报头中指示。 如果没有给出Retry-After，客户端应该像处理500响应一样处理响应。

注意：503的存在并不意味着服务器必须在过载时使用它。有些服务器只是简单地拒绝连接。

#### 504  Gateway Timeout

作为网关或代理服务器，服务器没有收到来自URI指定的上游服务器的及时响应或尝试完成时需要访问的其他辅助服务器的请求超时。

#### 505  HTTP Version Not Supported

服务器不支持或拒绝支持请求消息中使用的HTTP协议版本。
