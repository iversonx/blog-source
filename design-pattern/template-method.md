---
title: 行为型模式——模版方法模式
date: 2018-10-26
categories: 设计模式
tags: 学习笔记
description: 
---

#### 一、什么是模版方法模式

##### 1. 定义

定义一个操作中的算法的骨架，将一些步骤延迟到子类中。模版方法使子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。

##### 2. 结构说明

[结构示例图]

- AbstractClass：抽象类，定义算法骨架和原语操作，具体的子类通过重定义这些原语操作来实现一个算法的各个步骤。
- ConcreteClass：具体实现类，实现算法骨架中的某些步骤，完成与特定子类相关的功能。

##### 3. 示例代码

```java
public abstract class AbstractClass {
    // 原语操作
    public abstract void doPrimitiveOperation1();
    // 原语操作2
    public abstract void doPrimitiveOperation2();

    // 模版方法，定义算法骨架
    public final void templateMethod() {
        doPrimitiveOperation1();
        doPrimitiveOperation2();
    }
}

public class ConcreteClass extends AbstractClass {
    public void doPrimitiveOperation1(){
        // 具体实现
    }

    public void doPrimitiveOperation2() {
        // 具体实现
    }
}
```

#### 二、模版方法模式讲解

##### 1. 模板方法模式的功能

模板方法模式的功能在于固定算法骨架，而让具体算法实现可扩展。

模板方法模式还可以控制子类的扩展。因为在父类中定义好了算法的步骤，只是在某几个固定的点才会调用到被子类实现的方法。

##### 2. 变与不变

程序设计的一个重要的思考点就是“变与不变”：分析程序中哪些功能是可变的，哪些功能是不变的，然后把不变的部分抽象出来，进行公共的实现，把变化部分分离出去，用接口封装隔离，或者用抽象类约束子类行为。

模板方法实现的就是不变的方法和算法的骨架，而变化的地方，通过抽象方法，把具体的时候延迟到子类中。

#### 三、模版方法模式的优缺点

###### 优点

1. 通过父类的定义来约束子类的行为，从而使系统能有更好的复用性和扩展性。

   ###### 缺点
2. 算法骨架不容易升级，如果要对模板中的算法骨架进行变更，可能就会要求所有相关的子类进行相应的变化。

#### 四、什么时候选用模版方法模式

1. 需要固定定义算法骨架，实现一个算法的不变部分，把可变部分留给子类实现的情况，可以使用模板方法模式
2. 各个子类中具有公共行为，应该抽取出来，集中在一个公共类中去实现，从未避免代码重复。
3. 需要控制子类扩展的情况。模板方法模式会在特定的点来调用子类的方法，这样只运行在这些点进行扩展。

#### 五、相关模式
